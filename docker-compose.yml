version: "3.9"

services:
  influx:
    image: influxdb:latest
    volumes:
      - influxData:/var/lib/influxdb2
      - $PWD/config/influx.yml:/etc/influxdb2/config.yml
    ports:
      - 8086:8086
    environment:
        DOCKER_INFLUXDB_INIT_MODE: ${DOCKER_INFLUXDB_INIT_MODE}
        DOCKER_INFLUXDB_INIT_USERNAME: ${DOCKER_INFLUXDB_INIT_USERNAME}
        DOCKER_INFLUXDB_INIT_PASSWORD: ${DOCKER_INFLUXDB_INIT_PASSWORD}
        DOCKER_INFLUXDB_INIT_ORG: ${DOCKER_INFLUXDB_INIT_ORG}
        DOCKER_INFLUXDB_INIT_BUCKET: ${DOCKER_INFLUXDB_INIT_BUCKET}

  cargo-drip:
    image: cargo-drip:latest
    build:
      context: cargo-drip
    ports:
      - 8080:8080

volumes:
  influxData:
